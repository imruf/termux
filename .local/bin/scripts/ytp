#!/bin/sh

read -p "URL: " URL
read -p "RES: " RES

YT="${YT-youtube-dl -f}"

if [ $RES -eq 0 ]; then
MPVYT="${MPVYT-mpv --ytdl-format=}"
    printf "%s\n" "Fetching Code..."
    youtube-dl -F "$URL"
    read -p "Enter Code: " FORMAT
printf "%s\n" "Streaming..."
    eval "$MPVYT"\'$FORMAT\'  "$URL"
else
MPVYT="${MPVYT-xdg-open}"
YTF="bestvideo[height<=$RES]+bestaudio/best[height<=$RES]"
YTURL=$(eval "$YT" \'$YTF\'  -g "$URL")
printf "%s\n" "Streaming..."
    eval "$MPVYT" "$YTURL"
fi
